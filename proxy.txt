public interface Sum {
    public int calculateSum();
    public void displaySum();
}

//on System A 
class RealSum implements Sum {

    private int sum = 0;
    /**
     * Constructor
     * @param filename
     */
    public RealSum(int n) { 
        calculateRealSum(n);
    }

    /**
     * Acually calculates the sum.
     */
    private void calculateRealSum(int n) {
        this.sum = n * (n+1) / 2;
    }

    /**
     * Returns the sum.
     */
    public int calculateSum() { 
       return sum;
    }

	@Override
	public void displaySum() {
		System.out.println(sum);	
	}

}

//on System B 
class ProxySum implements Sum {
    private RealSum realSum = null;
    private int n = 0;
    /**
     * Constructor
     * @param filename 
     */
    public ProxySum(final int n) { 
        this.n = n; 
    }

    /**
     * Calculates the sum
     */
    public int calculateSum() {
        if (realSum == null) {
           realSum = new RealSum(n);
        } 
      return realSum.calculateSum();
    }
    
	@Override
	public void displaySum() {
		System.out.println(realSum.calculateSum());	
	}

}

class ProxyExample {

   /**
    * Test method
    */
   public static void main(String[] args) {
        final Sum sum1 = new ProxySum(5);
        final Sum sum2 = new ProxySum(3);
        
        sum1.calculateSum(); // calculation necessary
        sum1.displaySum();
        sum1.calculateSum(); // calculation unnecessary
        sum1.displaySum();
        sum2.calculateSum(); // calculation necessary
        sum2.displaySum();
        sum2.calculateSum(); // calculation unnecessary
        sum2.displaySum();
        sum1.calculateSum(); // calculation unnecessary
        sum1.displaySum();
    }
}

